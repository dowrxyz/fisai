(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab8cb"],{"166f":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("14d9");var r=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Roles y Permisos")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"crear roles",expression:"'crear roles'"}],attrs:{variant:"primary"},on:{click:function(t){return e.showModal("add",{name:""})}}},[e._v(" Agregar ")])]},proxy:!0},{key:"body",fn:function(){return[e.roles?t("DataTable",{attrs:{data:e.roles,columns:e.columns,"fields-search":["name"]},scopedSlots:e._u([{key:"rows",fn:function(a){var r=a.row,n=a.rowIndex;return[t("tr",[t("th",{attrs:{scope:"row"}},[e._v(e._s(++n))]),t("td",[e._v(" "+e._s(r.name)+" ")]),t("td",[t("b-button-group",[t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"leer roles",expression:"'leer roles'"}],attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.$router.push({name:"role.detail",params:{id:r.id}})}}},[t("i",{staticClass:"ri-file-list-line m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"actualizar roles",expression:"'actualizar roles'"}],attrs:{variant:"warning",size:"sm"},on:{click:function(t){return e.showModal("edit",r)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"eliminar roles",expression:"'eliminar roles'"}],attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.destroy(r.id)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])],1)],1)])]}}],null,!1,1034286303)}):e._e()]},proxy:!0}])})],1)],1),t("ModalForm",{attrs:{type:e.type,data:e.data},on:{getData:e.getData}})],1)},n=[],o=a("c7eb"),i=a("1da1"),s=a("442f"),c=a("bcae"),l=a("7424"),u=a("1fdb"),d=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"modal-form",title:"add"===e.type?"Agregar Rol":"Editar Rol","no-close-on-backdrop":"","hide-footer":""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),r(e.onSubmit)}}},[t("b-row",[t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Nombre:","label-for":"name"}},[t("ValidationProvider",{attrs:{name:"Nombre",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("div",{staticClass:"col-md-12 w-100"},[t("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[e._v(" "+e._s("add"===e.type?"Guardar":"Actualizar")+" ")])],1)],1)],1)]}}])})],1)},m=[],f={components:{},props:{type:{type:String,required:!0,default:"add"},data:{type:Object,required:!1}},data:function(){return{form:{name:""}}},watch:{data:function(e,t){this.form=e}},computed:{},methods:{onSubmit:function(){"add"===this.type?this.saveData():this.updateData()},saveData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].post("/roles",e.form);case 3:e.form={name:""},e.$bvModal.hide("modal-form"),e.$emit("getData"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:l["a"].put("/roles/".concat(e.data.id),e.form).then((function(){s["a"].fire({icon:"success",title:"Actualizado Correctamente"}),e.$bvModal.hide("modal-form"),e.$emit("getData")})).catch((function(){s["a"].fire({icon:"error",title:"Error"})}));case 1:case"end":return t.stop()}}),t)})))()}}},p=f,b=a("2877"),v=Object(b["a"])(p,d,m,!1,null,null,null),h=v.exports,w=a("3d20"),y=a.n(w),g={components:{DataTable:u["a"],ModalForm:h},mounted:function(){c["a"].index(),this.getData()},computed:{},methods:{getData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].get("/roles");case 3:a=t.sent,r=a.data,e.roles=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showModal:function(e,t){this.data={id:t.id,name:t.name},this.type=e,this.$bvModal.show("modal-form")},destroy:function(e){var t=this;y.a.fire({icon:"warning",title:"Seguro de eliminar",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&l["a"].delete("/roles/".concat(e)).then((function(e){200===e.status&&(s["a"].fire({icon:"success",title:"Eliminado correctamente"}),t.getData())})).catch((function(e){s["a"].fire({icon:"error",title:e.message})}))}))}},data:function(){return{data:{},type:"add",roles:[],columns:[{name:"Nombre",field:"name",sort:""},{name:"Acciones",field:"actions",sort:""}]}}},x=g,k=Object(b["a"])(x,r,n,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0ab8cb.affc14d8.js.map