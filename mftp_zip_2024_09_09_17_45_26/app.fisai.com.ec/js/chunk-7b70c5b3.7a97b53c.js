(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b70c5b3"],{d9c3:function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a");var r=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("h4",{staticClass:"card-title"},[t._v("Lista de Tratamientos")])]},proxy:!0},{key:"headerAction",fn:function(){return["Paciente"!=t.role?e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.showModal("add",{diagnostic_title:null,description:null,objective:null,medication:null})}}},[t._v(" Agregar ")]):t._e()]},proxy:!0},{key:"body",fn:function(){return[t.treatments?e("DataTable",{attrs:{data:t.treatments,columns:t.columns,"fields-search":["doctor","patient","date","diagnostic_title","description_treatment","objective","medication"]},scopedSlots:t._u([{key:"rows",fn:function(a){var r=a.row,i=a.rowIndex;return[e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(" "+t._s(r.date)+" ")]),e("td",[t._v(" "+t._s(r.doctor)+" ")]),e("td",[t._v(" "+t._s(r.patient)+" ")]),e("td",[t._v(" "+t._s(r.diagnostic_title)+" ")]),e("td",[t._v(" "+t._s(r.description)+" ")]),e("td",[t._v(" "+t._s(r.objective)+" ")]),e("td",[t._v(" "+t._s(r.medication)+" ")]),e("td",[e("b-button-group",[e("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"eliminar tratamientos",expression:"'eliminar tratamientos'"}],attrs:{variant:"danger"},on:{click:function(e){return t.destroy(r.id)}}},[e("i",{staticClass:"ri-delete-bin-line m-0"})])],1)],1)])]}}],null,!1,453892801)}):t._e()]},proxy:!0}])})],1)],1),e("ModalAdd",{attrs:{type:t.type,data:t.data},on:{getData:t.getData}})],1)},i=[],n=a("c7eb"),o=a("1da1"),s=(a("b64b"),a("442f")),c=a("bcae"),l=a("7424"),d=a("1fdb"),u=a("3d20"),f=a.n(u),m=a("f016"),p={components:{DataTable:d["a"],ModalAdd:m["a"]},data:function(){return{treatments:[],data:{},columns:[{name:"Fecha",field:"date",sort:""},{name:"Doctor",field:"doctor",sort:""},{name:"Paciente",field:"patient",sort:""},{name:"Diagnóstico",field:"diagnostic_title",sort:""},{name:"Tratamiento",field:"description",sort:""},{name:"Objetivo",field:"objective",sort:""},{name:"Medicación",field:"medication",sort:""}],type:"add",role:null}},mounted:function(){c["a"].index(),this.getData();var t=JSON.parse(localStorage.getItem("user"));this.role=t.role},computed:{},methods:{getData:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){var a,r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].get("/treatments");case 3:a=e.sent,r=a.data,t.treatments=r.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},showModal:function(t,e){this.data=e,this.type=t,this.$bvModal.show("modal-add-treatment")},destroy:function(t){var e=this;f.a.fire({icon:"warning",title:"Seguro de eliminar",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&l["a"].delete("/treatments/".concat(t)).then((function(t){200===t.status&&(s["a"].fire({icon:"success",title:"Eliminado correctamente"}),e.getData())})).catch((function(t){s["a"].fire({icon:"error",title:t.message})}))}))}}},v=p,b=a("2877"),_=Object(b["a"])(v,r,i,!1,null,null,null);e["default"]=_.exports},f016:function(t,e,a){"use strict";a("a4d3"),a("e01a");var r=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modal-add-treatment",size:"xl",title:"Agregar Tratamiento","no-close-on-backdrop":"","hide-footer":""}},[e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[e("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[e("b-row",[e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Fecha:","label-for":"date"}},[e("ValidationProvider",{attrs:{name:"Fecha",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{id:"date",type:"date"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),"Doctor"!=t.role?e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Doctor:","label-for":"doctor_id"}},[e("ValidationProvider",{attrs:{name:"Doctor",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-select",{class:r.length>0?" is-invalid":"",attrs:{options:t.doctors,label:"full_name",reduce:function(t){return t.id}},model:{value:t.form.doctor_id,callback:function(e){t.$set(t.form,"doctor_id",e)},expression:"form.doctor_id"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1):t._e(),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Paciente:","label-for":"patient_id"}},[e("ValidationProvider",{attrs:{name:"Paciente",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-select",{class:r.length>0?" is-invalid":"",attrs:{options:t.patients,label:"full_name",reduce:function(t){return t.id}},model:{value:t.form.patient_id,callback:function(e){t.$set(t.form,"patient_id",e)},expression:"form.patient_id"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Diagnostico:","label-for":"diagnostic_title"}},[e("ValidationProvider",{attrs:{name:"Diagnostico",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Diagnostico"},model:{value:t.form.diagnostic_title,callback:function(e){t.$set(t.form,"diagnostic_title",e)},expression:"form.diagnostic_title"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Descripción:","label-for":"description"}},[e("ValidationProvider",{attrs:{name:"Descripción",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Descripción"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Objetivo:","label-for":"objective"}},[e("ValidationProvider",{attrs:{name:"Objetivo",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Objetivo"},model:{value:t.form.objective,callback:function(e){t.$set(t.form,"objective",e)},expression:"form.objective"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-12",attrs:{label:"Medicación:","label-for":"medication"}},[e("ValidationProvider",{attrs:{name:"Medicación",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-textarea",{class:r.length>0?" is-invalid":"",attrs:{id:"medication",placeholder:"Ingrese la medicación...",rows:"2","max-rows":"4"},model:{value:t.form.medication,callback:function(e){t.$set(t.form,"medication",e)},expression:"form.medication"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("div",{staticClass:"col-md-12 w-100"},[e("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[t._v(" Guardar ")])],1)],1)],1)]}}])})],1)},i=[],n=a("c7eb"),o=a("1da1"),s=(a("fb6a"),a("b64b"),a("442f")),c=a("7424"),l={components:{},props:{data:{type:Object,required:!1}},mounted:function(){this.getDoctors(),this.getPatients();var t=new Date;this.form.date=t.toISOString().slice(0,10);var e=JSON.parse(localStorage.getItem("user"));this.role=e.role},watch:{data:function(t,e){if("Doctor"===this.role){var a=JSON.parse(localStorage.getItem("user"));this.form.doctor_id=a.doctor_id}else this.form.doctor_id=t.doctor_id;this.form.patient_id=t.patient_id,this.form.appointment_id=t.id}},computed:{},methods:{onSubmit:function(){this.saveTreatment()},saveTreatment:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].post("/treatments",t.form);case 3:t.$bvModal.hide("modal-add-treatment"),t.$emit("getData"),s["a"].fire({icon:"success",title:"Tratamiento Creado"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getDoctors:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){var a,r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].get("/lists/doctors");case 3:a=e.sent,r=a.data,t.doctors=r,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getPatients:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){var a,r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].get("/lists/patients");case 3:a=e.sent,r=a.data,t.patients=r,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},data:function(){return{form:{doctor_id:null,patient_id:null,appointment_id:null,date:null,diagnostic_title:null,description:null,objective:null,medication:null},doctors:[],patients:[],role:null}}},d=l,u=a("2877"),f=Object(u["a"])(d,r,i,!1,null,null,null);e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-7b70c5b3.7a97b53c.js.map