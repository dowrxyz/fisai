(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75a6e002"],{"0474":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"8"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Configuración General")])]},proxy:!0},{key:"body",fn:function(){return[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(n){var r=n.handleSubmit;return[t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),r(e.onSubmit)}}},[t("b-form-group",{staticClass:"row",attrs:{"label-cols-sm":"2",label:"Nombre:","label-for":"name"}},[t("b-form-input",{attrs:{id:"name",placeholder:"Enter Your name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("b-form-group",{staticClass:"row",attrs:{"label-cols-sm":"2",label:"Dirección:","label-for":"address"}},[t("b-form-input",{attrs:{id:"address",placeholder:"Enter Your address"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("b-form-group",{staticClass:"row",attrs:{"label-cols-sm":"2",label:"Correo Electrónico:","label-for":"email"}},[t("b-form-input",{attrs:{id:"email",placeholder:"Enter Your email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("b-form-group",{staticClass:"row",attrs:{"label-cols-sm":"2",label:"Teléfono:","label-for":"phone"}},[t("b-form-input",{attrs:{id:"phone",placeholder:"Enter Your phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("b-form-group",{staticClass:"row",attrs:{"label-cols-sm":"2",label:"Logo:","label-for":"logo"}},[t("b-form-file",{attrs:{id:"logo",state:Boolean(e.form.logo),placeholder:"Elija un archivo o suéltelo aquí...","drop-placeholder":"Suelta el archivo aquí..."},on:{change:e.onChangeFile},model:{value:e.form.logo,callback:function(t){e.$set(e.form,"logo",t)},expression:"form.logo"}})],1),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"actualizar configuracion",expression:"'actualizar configuracion'"}],attrs:{type:"submit",variant:"primary"}},[e._v("Actualizar")])],1)]}}])})]},proxy:!0}])})],1),t("b-col",{attrs:{md:"4"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Logo")])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"text-center"},[t("img",{staticStyle:{width:"100%"},attrs:{src:"".concat(e.logo)}})])]},proxy:!0}])})],1),t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Horarios de Atención")])]},proxy:!0},{key:"body",fn:function(){return[t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.updateSchedule.apply(null,arguments)}}},[e._l(e.attentionSchedule,(function(n,r){return t("b-row",{key:r,staticClass:"mb-2"},[t("b-col",{staticStyle:{margin:"auto"},attrs:{md:"2"}},[t("label",[e._v(e._s(n.name)+":")]),e._v(" "),t("br"),t("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1},on:{change:function(t){return e.toggleAttention(r)}},model:{value:n.attention,callback:function(t){e.$set(n,"attention",t)},expression:"value.attention"}},[e._v(" "+e._s(n.attention?"Hay Atención":"No Hay Atención")+" ")])],1),t("b-col",{attrs:{md:"10"}},e._l(n.hours,(function(a,i){return t("b-row",{key:i,staticClass:"mb-2"},[t("b-col",{attrs:{md:"5"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.attentionSchedule[r].hours[i].startTime,expression:"attentionSchedule[idx].hours[index].startTime"}],staticClass:"form-control",attrs:{type:"time",disabled:!n.attention},domProps:{value:e.attentionSchedule[r].hours[i].startTime},on:{input:function(t){t.target.composing||e.$set(e.attentionSchedule[r].hours[i],"startTime",t.target.value)}}})]),t("b-col",{attrs:{md:"5"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.attentionSchedule[r].hours[i].startTime,expression:"attentionSchedule[idx].hours[index].startTime"}],staticClass:"form-control",attrs:{type:"time",disabled:!n.attention},domProps:{value:e.attentionSchedule[r].hours[i].startTime},on:{input:function(t){t.target.composing||e.$set(e.attentionSchedule[r].hours[i],"startTime",t.target.value)}}})]),t("b-col",{staticStyle:{margin:"auto"},attrs:{md:"2"}},[1===e.attentionSchedule[r].hours.length?t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.pushTimes(r)}}},[t("i",{staticClass:"fa fa-plus"})]):e._e(),2===e.attentionSchedule[r].hours.length&&1===i?t("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteTimes(r,i)}}},[t("i",{staticClass:"fa fa-minus"})]):e._e()],1)],1)})),1),t("b-col",{attrs:{md:"12"}},[t("hr")])],1)})),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"actualizar configuracion",expression:"'actualizar configuracion'"}],attrs:{type:"submit",variant:"primary"}},[e._v("Actualizar")])],2)]},proxy:!0}])})],1)],1)],1)},a=[],i=n("b85c"),o=n("3835"),l=n("c7eb"),s=n("1da1"),c=(n("d3b7"),n("159b"),n("4fadc"),n("14d9"),n("a434"),n("d81d"),n("a9e3"),n("442f")),u=n("bcae"),f=n("7424"),m={mounted:function(){u["a"].index(),this.getConfig(),this.getSchedules()},computed:{},methods:{getConfig:function(){var e=this;return Object(s["a"])(Object(l["a"])().mark((function t(){var n,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].get("/general-configuration");case 3:n=t.sent,r=n.data,e.form=r,e.logo="".concat(e.form.logo),e.form.logo=null,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),c["a"].fire({icon:"error",title:"Error"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getSchedules:function(){var e=this;return Object(s["a"])(Object(l["a"])().mark((function t(){var n,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].get("/schedules");case 3:n=t.sent,r=n.data,e.attentionSchedule=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),c["a"].fire({icon:"error",title:"Error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onSubmit:function(){var e=this;return Object(s["a"])(Object(l["a"])().mark((function t(){var n,r,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.entries(e.form).forEach((function(e){var t=Object(o["a"])(e,2),r=t[0],a=t[1];n.append(r,a)})),t.next=5,f["a"].post("/general-configuration",n);case 5:c["a"].fire({icon:"success",title:"Configuración Actualizada"}),e.getConfig(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),a=(null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||"Error al actualizar la configuración",c["a"].fire({icon:"error",title:a});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},updateSchedule:function(){var e=this,t=this.validateAttentionSchedule(this.attentionSchedule);t?(c["a"].fire({icon:"success",title:"El objeto attentionSchedule es válido."}),f["a"].put("/schedules",this.attentionSchedule).then((function(){c["a"].fire({icon:"success",title:"Horarios Actualizados"}),e.getSchedules()})).catch((function(e){var t,n=(null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||"Error al actualizar la configuración";c["a"].fire({icon:"error",title:n})}))):c["a"].fire({icon:"error",title:"El objeto attentionSchedule no es válido."})},onChangeFile:function(e){this.form.logo=e.target.files[0]},pushTimes:function(e){this.attentionSchedule[e].hours.push({startTime:"08:00:00",finalTime:"20:00:00"})},deleteTimes:function(e,t){this.attentionSchedule[e].hours.splice(t,1)},validateAttentionSchedule:function(e){var t,n=Object(i["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.name,o=r.attention,l=r.hours;if(o){var s=l.length;if(s>2)return c["a"].fire({icon:"error",title:"".concat(a," tiene más de 2 objetos.")}),!1;if(1===s){var u=l[0],f=u.startTime,m=u.finalTime;if(this.startTimeGreaterThanEndTime(f,m))return c["a"].fire({icon:"error",title:"".concat(a," tiene startTime mayor que finalTime.")}),!1}if(2===s){var d=l[0],h=d.startTime,b=d.finalTime,p=l[1],v=p.startTime,T=p.finalTime;if(this.startTimeGreaterThanEndTime(h,b))return c["a"].fire({icon:"error",title:"El primer objeto de ".concat(a," tiene startTime mayor que finalTime.")}),!1;if(this.startTimeGreaterThanEndTime(v,T))return c["a"].fire({icon:"error",title:"El segundo objeto de ".concat(a," tiene startTime mayor que finalTime.")}),!1;if(this.startTimeGreaterThanEndTime(b,v))return c["a"].fire({icon:"error",title:"El segundo objeto de ".concat(a," tiene startTime menor que finalTime del primer objeto.")}),!1}}else c["a"].fire({icon:"error",title:"".concat(a," no requiere validación de horas debido a que attention es false.")})}}catch(g){n.e(g)}finally{n.f()}return!0},startTimeGreaterThanEndTime:function(e,t){var n=this.timeToMinutes(e),r=this.timeToMinutes(t);return n>=r},timeToMinutes:function(e){var t=e.split(":").map(Number),n=Object(o["a"])(t,3),r=n[0],a=n[1],i=n[2];return 60*r+a+i/60},toggleAttention:function(e){this.attentionSchedule[e].attention?this.attentionSchedule[e].hours=[{startTime:"08:00:00",finalTime:"20:00:00"}]:this.attentionSchedule[e].hours=[{startTime:null,finalTime:null}]}},data:function(){return{logo:null,form:{},attentionSchedule:[{name:"Lunes",attention:!0,hours:[{startTime:"08:00:00",finalTime:"13:00:00"},{startTime:"15:00:00",finalTime:"20:00:00"}]},{name:"Martes",attention:!0,hours:[{startTime:"08:00:00",finalTime:"13:00:00"},{startTime:"15:00:00",finalTime:"20:00:00"}]},{name:"Miércoles",attention:!0,hours:[{startTime:"08:00:00",finalTime:"13:00:00"},{startTime:"15:00:00",finalTime:"20:00:00"}]},{name:"Jueves",attention:!0,hours:[{startTime:"08:00:00",finalTime:"13:00:00"},{startTime:"15:00:00",finalTime:"20:00:00"}]},{name:"Viernes",attention:!0,hours:[{startTime:"09:00:00",finalTime:"18:00:00"}]},{name:"Sábado",attention:!0,hours:[{startTime:"09:00:00",finalTime:"15:00:00"}]},{name:"Domingo",attention:!1,hours:[{startTime:null,finalTime:null}]}]}}},d=m,h=n("2877"),b=Object(h["a"])(d,r,a,!1,null,null,null);t["default"]=b.exports},3835:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return l}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("14d9");function a(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(c)throw a}}return l}}var i=n("06c5");n("d9e2");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return r(e)||a(e,t)||Object(i["a"])(e,t)||o()}},"4fadc":function(e,t,n){"use strict";var r=n("23e7"),a=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return a(e)}})},"6f53":function(e,t,n){"use strict";var r=n("83ab"),a=n("d039"),i=n("e330"),o=n("e163"),l=n("df75"),s=n("fc6a"),c=n("d1e7").f,u=i(c),f=i([].push),m=r&&a((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),d=function(e){return function(t){var n,a=s(t),i=l(a),c=m&&null===o(a),d=i.length,h=0,b=[];while(d>h)n=i[h++],r&&!(c?n in a:u(a,n))||f(b,e?[n,a[n]]:a[n]);return b}};e.exports={entries:d(!0),values:d(!1)}},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");var r=n("06c5");function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}}}]);
//# sourceMappingURL=chunk-75a6e002.9a3ad12d.js.map