(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7265"],{"761a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("h4",{staticClass:"card-title"},[t._v("Lista de Consejos")])]},proxy:!0},{key:"headerAction",fn:function(){return[e("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"crear consejos",expression:"'crear consejos'"}],attrs:{variant:"primary"},on:{click:function(e){return t.showModal("add",{title:null,date:null,url:null})}}},[t._v(" Agregar ")])]},proxy:!0},{key:"body",fn:function(){return[t.tips?e("DataTable",{attrs:{data:t.tips,columns:t.columns,"fields-search":["title"]},scopedSlots:t._u([{key:"rows",fn:function(a){var r=a.row,s=a.rowIndex;return[e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),e("td",[t._v(" "+t._s(r.title)+" ")]),e("td",[e("a",{attrs:{href:r.url,target:"_blank"}},[t._v("Ver Vídeo")])]),e("td",[t._v(" "+t._s(r.date_format)+" ")]),e("td",[e("b-button-group",[e("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"actualizar consejos",expression:"'actualizar consejos'"}],attrs:{variant:"warning",size:"sm"},on:{click:function(e){return t.showModal("edit",r)}}},[e("i",{staticClass:"ri-ball-pen-fill m-0"})]),e("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"eliminar consejos",expression:"'eliminar consejos'"}],attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.destroy(r.id)}}},[e("i",{staticClass:"ri-delete-bin-line m-0"})])],1)],1)])]}}],null,!1,2976539614)}):t._e()]},proxy:!0}])})],1)],1),e("ModalForm",{attrs:{type:t.type,data:t.data},on:{getData:t.getData}})],1)},s=[],o=a("c7eb"),n=a("1da1"),i=a("442f"),l=a("bcae"),c=a("7424"),u=a("1fdb"),d=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modal-form",title:"add"===t.type?"Agregar Consejo":"Editar Consejo","no-close-on-backdrop":"","hide-footer":""}},[e("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showDismissibleAlert,callback:function(e){t.showDismissibleAlert=e},expression:"showDismissibleAlert"}},[e("div",{staticClass:"iq-alert-text"},[e("h5",{staticClass:"alert-heading"},[t._v("Errores")]),e("p",t._l(t.errorMessages,(function(a){return e("ol",{key:a},[e("li",[t._v(t._s(a))])])})),0)])]),e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[e("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[e("b-row",[e("b-form-group",{staticClass:"col-md-12",attrs:{label:"Título:"}},[e("ValidationProvider",{attrs:{name:"Título",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-12",attrs:{label:"Fecha:"}},[e("ValidationProvider",{attrs:{name:"Fecha",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"date"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-12",attrs:{label:"URL:"}},[e("ValidationProvider",{attrs:{name:"URL",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("div",{staticClass:"col-md-12 w-100"},[e("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[t._v(" "+t._s("add"===t.type?"Guardar":"Actualizar")+" ")])],1)],1)],1)]}}])})],1)},f=[],m=a("2909"),p=(a("14d9"),a("a15b"),{components:{},props:{type:{type:String,required:!0,default:"add"},data:{type:Object,required:!1}},data:function(){return{form:{title:null,date:null,url:null},errorMessages:[],showDismissibleAlert:!1}},watch:{data:function(t,e){this.form=t}},methods:{onSubmit:function(){"add"===this.type?this.saveData():this.updateData()},saveData:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].post("/tips",t.form);case 3:i["a"].fire({icon:"success",title:"Consejo Guardado"}),t.$bvModal.hide("modal-form"),t.$emit("getData"),t.errorMessages=[],e.next=12;break;case 9:if(e.prev=9,e.t0=e["catch"](0),e.t0&&e.t0.data&&e.t0.data.errors){for(a in t.showDismissibleAlert=!0,t.errorMessages=[],e.t0.data.errors)(r=t.errorMessages).push.apply(r,Object(m["a"])(e.t0.data.errors[a]));t.$bvToast.toast(t.errorMessages.join("<br>"),{title:"Error",variant:"danger",solid:!0,autoHideDelay:5e3})}else t.$bvToast.toast("Ha ocurrido un error",{title:"Error",variant:"danger",solid:!0,autoHideDelay:5e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},updateData:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].put("/tips/".concat(t.data.id),t.form);case 3:i["a"].fire({icon:"success",title:"Consejo Actualizado"}),t.$bvModal.hide("modal-form"),t.$emit("getData"),t.errorMessages=[],e.next=12;break;case 9:if(e.prev=9,e.t0=e["catch"](0),e.t0&&e.t0.data&&e.t0.data.errors){for(a in t.showDismissibleAlert=!0,t.errorMessages=[],e.t0.data.errors)(r=t.errorMessages).push.apply(r,Object(m["a"])(e.t0.data.errors[a]));t.$bvToast.toast(t.errorMessages.join("<br>"),{title:"Error",variant:"danger",solid:!0,autoHideDelay:5e3})}else t.$bvToast.toast("Ha ocurrido un error",{title:"Error",variant:"danger",solid:!0,autoHideDelay:5e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}}),b=p,v=a("2877"),h=Object(v["a"])(b,d,f,!1,null,null,null),g=h.exports,w=a("3d20"),y=a.n(w),_={components:{ModalForm:g,DataTable:u["a"]},data:function(){return{data:{},type:"add",tips:[],columns:[{name:"Título",field:"title",sort:""},{name:"URL",field:"url",sort:""},{name:"Fecha",field:"date_format",sort:""}]}},mounted:function(){l["a"].index(),this.getData()},methods:{getData:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].get("/tips");case 3:a=e.sent,r=a.data,t.tips=r.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),i["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},showModal:function(t,e){this.data=e,this.type=t,this.$bvModal.show("modal-form")},destroy:function(t){var e=this;y.a.fire({icon:"warning",title:"Seguro de eliminar",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&c["a"].delete("/tips/".concat(t)).then((function(t){200===t.status&&(i["a"].fire({icon:"success",title:"Eliminado correctamente"}),e.getData())})).catch((function(t){i["a"].fire({icon:"error",title:t.message})}))}))}}},k=_,x=Object(v["a"])(k,r,s,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d0d7265.55fff595.js.map