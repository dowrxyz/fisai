(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1749"],{"7b08":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("h4",{staticClass:"card-title"},[t._v("Glucemia")])]},proxy:!0},{key:"headerAction",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:function(e){t.showModal("add",{date:(new Date).toISOString().substr(0,10),quantity:0})}}},[t._v(" Agregar ")])]},proxy:!0},{key:"body",fn:function(){return[t.glycemia?e("DataTable",{attrs:{data:t.sortedData,columns:t.columns,"fields-search":["description"]},scopedSlots:t._u([{key:"rows",fn:function(a){var r=a.row,n=a.rowIndex;return[e("tr",[e("th",{attrs:{scope:"row"}},[t._v(t._s(n+1))]),e("td",[t._v(" "+t._s(r.date)+" ")]),e("td",[t._v(" "+t._s(r.quantity)+" ")]),e("td",["NORMAL"===r.result?e("b-badge",{attrs:{variant:"success"}},[t._v(" "+t._s(r.result)+" ")]):"PREDIABETES"===r.result?e("b-badge",{attrs:{variant:"warning"}},[t._v(" "+t._s(r.result)+" ")]):e("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(r.result))])],1),e("td",[e("b-button-group",[e("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:function(e){return t.showModal("edit",r)}}},[e("i",{staticClass:"ri-ball-pen-fill m-0"})]),e("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.destroy(r.id)}}},[e("i",{staticClass:"ri-delete-bin-line m-0"})])],1)],1)])]}}],null,!1,2402627047)}):t._e()]},proxy:!0}])})],1)],1),e("ModalForm",{attrs:{type:t.type,data:t.data},on:{getData:t.getData}})],1)},n=[],o=a("c7eb"),i=a("1da1"),s=(a("4e82"),a("fb6a"),a("b64b"),a("99af"),a("442f")),c=a("bcae"),u=a("1fdb"),l=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modal-form",title:"add"===t.type?"Agregar":"Editar","no-close-on-backdrop":"","hide-footer":""}},[e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[e("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[e("b-row",[e("b-form-group",{staticClass:"col-md-12",attrs:{label:"Fecha:","label-for":"date"}},[e("ValidationProvider",{attrs:{name:"Fecha",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"date"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("b-form-group",{staticClass:"col-md-12",attrs:{label:"Cantidad:","label-for":"quantity"}},[e("ValidationProvider",{attrs:{name:"Cantidad",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"number"},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),e("div",{staticClass:"col-md-12 w-100"},[e("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[t._v(" "+t._s("add"===t.type?"Guardar":"Actualizar")+" ")])],1)],1)],1)]}}])})],1)},d=[],f=a("7424"),m=a("3d20"),p=a.n(m),b={components:{},props:{type:{type:String,required:!0,default:"add"},data:{type:Object,required:!1}},data:function(){return{form:{quantity:0,date:""}}},watch:{data:function(t,e){"edit"===this.type&&(t.date=this.formatDate(t.date)),this.form=t}},methods:{onSubmit:function(){"add"===this.type?this.saveData():this.updateData()},saveData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),e.prev=1,e.next=4,f["a"].post("/patients/".concat(a.patient_id,"/glucose"),t.form);case 4:t.showAlert(t.form.quantity),t.$bvModal.hide("modal-form"),t.$emit("getData"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),s["a"].fire({icon:"error",title:"Error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showAlert:function(t){t<100?p.a.fire("Normal","¡Excelente sigue así! 😁","success"):t<=125?p.a.fire("¡Prediabetes!","¡Estás en buen tiempo para mejorar! 🙂","warning"):p.a.fire("¡Diabetes!","¡Atención, debes tener mucho cuidado! 😔","error")},updateData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),e.prev=1,e.next=4,f["a"].put("/patients/".concat(a.patient_id,"/glucose"),t.form);case 4:t.showAlert(t.form.quantity),t.$bvModal.hide("modal-form"),t.$emit("getData"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),s["a"].fire({icon:"error",title:"Error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},formatDate:function(t){var e=t.split("-"),a=e[0],r=e[1],n=1===e[2].length?"0".concat(e[2]):e[2];return"".concat(a,"-").concat(r,"-").concat(n)}}},h=b,v=a("2877"),g=Object(v["a"])(h,l,d,!1,null,null,null),y=g.exports,w={components:{ModalForm:y,DataTable:u["a"]},data:function(){return{data:{},type:"add",glycemia:[],columns:[{name:"Fecha",field:"date",sort:""},{name:"Cantidad",field:"quantity",sort:""},{name:"Resultado",field:"result",sort:""}]}},mounted:function(){c["a"].index(),this.getData()},computed:{sortedData:function(){return this.glycemia.slice().sort((function(t,e){return new Date(e.date)-new Date(t.date)}))}},methods:{getData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a,r,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),e.prev=1,e.next=4,f["a"].get("/patients/".concat(a.patient_id));case 4:r=e.sent,n=r.data,t.glycemia=n.data.glucose,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),s["a"].fire({icon:"error",title:"Error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showModal:function(t,e){this.data=e,this.type=t,this.$bvModal.show("modal-form")},destroy:function(t){var e=this,a=JSON.parse(localStorage.getItem("user"));p.a.fire({icon:"warning",title:"Seguro de eliminar",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(r){r.isConfirmed&&f["a"].delete("/patients/".concat(a.patient_id,"/glucose/").concat(t)).then((function(t){200===t.status&&(s["a"].fire({icon:"success",title:"Eliminado correctamente"}),e.getData())})).catch((function(t){s["a"].fire({icon:"error",title:t.message})}))}))}}},_=w,k=Object(v["a"])(_,r,n,!1,null,null,null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0e1749.92412612.js.map