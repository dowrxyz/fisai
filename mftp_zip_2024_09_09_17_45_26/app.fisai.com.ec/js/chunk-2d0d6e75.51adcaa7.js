(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6e75"],{7512:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Lista de Pacientes")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"crear pacientes",expression:"'crear pacientes'"}],attrs:{variant:"primary"},on:{click:function(t){return e.showModal("add",e.clearForm)}}},[e._v(" Agregar ")])]},proxy:!0},{key:"body",fn:function(){return[e.patients?t("DataTable",{attrs:{data:e.patients,columns:e.columns,"fields-search":["first_last_name","second_last_name","name","email","document_number","age"]},scopedSlots:e._u([{key:"patient_type",fn:function(){return[t("b-form-group",{staticClass:"col-md-2",attrs:{"label-for":"TIPO DE PACIENTE",label:"TIPO DE PACIENTE:"}},[t("b-form-select",{attrs:{plain:"",options:["Todos","Medico","Fisioterapeutico"],id:"patient_type"},on:{change:e.handleSearchPatient},model:{value:e.type_patient,callback:function(t){e.type_patient=t},expression:"type_patient"}})],1)]},proxy:!0},{key:"rows",fn:function(a){var r=a.row,o=a.rowIndex;return[t("tr",[t("th",{attrs:{scope:"row"}},[e._v(e._s(++o))]),t("td",[e._v(" "+e._s(r.first_last_name)+" "+e._s(r.second_last_name)+", "+e._s(r.name)+" "),t("br"),t("small",[t("b",[e._v("Edad:")]),e._v(" "+e._s(r.age)+" años")]),e._v(" | "),t("small",[t("b",[e._v("Género:")]),e._v(" "+e._s(r.gender))])]),t("td",[e._v(" "+e._s(r.document_number)+" "),t("br"),t("small",[t("b",[e._v("Tipo:")]),e._v(" "+e._s(r.document_type))])]),t("td",[e._v(e._s(r.phone))]),t("td",[e._v(e._s(r.email))]),t("td",[t("b-button-group",[t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"leer pacientes",expression:"'leer pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"info",size:"sm",title:"Historial Clínico"},on:{click:function(t){return e.goToHistory(r.id)}}},[t("i",{staticClass:"ri-survey-line m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"leer pacientes",expression:"'leer pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"success",size:"sm",title:"Historial Fisioterapeutico"},on:{click:function(t){return e.goToPhysiotherapeutic(r.id)}}},[t("i",{staticClass:"ri-survey-line m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"leer pacientes",expression:"'leer pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"success",size:"sm",title:"Notas de Evolucion"},on:{click:function(t){return e.goToEvolutionNotes(r.id)}}},[t("i",{staticClass:"ri-survey-line m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"leer pacientes",expression:"'leer pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"secondary",size:"sm",title:"Detalle Paciente"},on:{click:function(t){return e.goToEdit(r.id)}}},[t("i",{staticClass:"ri-file-list-line m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"actualizar pacientes",expression:"'actualizar pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm",title:"Editar Paciente"},on:{click:function(t){return e.showModal("edit",r)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),t("b-button",{directives:[{name:"user-can",rawName:"v-user-can",value:"eliminar pacientes",expression:"'eliminar pacientes'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm",title:"Eliminar Paciente"},on:{click:function(t){return e.destroy(r.id)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])],1)],1)])]}}],null,!1,882702755)}):e._e()]},proxy:!0}])})],1)],1),t("ModalForm",{attrs:{type:e.type,data:e.data},on:{getData:e.getData}})],1)},o=[],i=a("c7eb"),n=a("1da1"),s=(a("14d9"),a("442f")),l=a("bcae"),c=a("7424"),d=a("1fdb"),u=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"modal-form",size:"xl",title:"add"===e.type?"Agregar Paciente":"Editar Paciente","no-close-on-backdrop":"","hide-footer":""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),r(e.onSubmit)}}},[t("b-row",[t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Primer Apellido:","label-for":"first_last_name"}},[t("ValidationProvider",{attrs:{name:"Primer Apellido",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Primer Apellido"},model:{value:e.form.first_last_name,callback:function(t){e.$set(e.form,"first_last_name",t)},expression:"form.first_last_name"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Segundo Apelllido:","label-for":"second_last_name"}},[t("ValidationProvider",{attrs:{name:"Segundo Apelllido",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Segundo Apelllido"},model:{value:e.form.second_last_name,callback:function(t){e.$set(e.form,"second_last_name",t)},expression:"form.second_last_name"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Nombres:","label-for":"name"}},[t("ValidationProvider",{attrs:{name:"Nombres",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Nombres"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{"label-for":"document_type",label:"Tipo de Documento:"}},[t("b-form-select",{attrs:{plain:"",options:["CEDULA","PASAPORTE"],id:"document_type"},model:{value:e.form.document_type,callback:function(t){e.$set(e.form,"document_type",t)},expression:"form.document_type"}})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Número de Documento:","label-for":"document_number"}},[t("ValidationProvider",{attrs:{name:"Número de Documento",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Número de Documento"},model:{value:e.form.document_number,callback:function(t){e.$set(e.form,"document_number",t)},expression:"form.document_number"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Correo Electrónico:","label-for":"email"}},[t("ValidationProvider",{attrs:{name:"Correo Electrónico",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{disabled:"edit"===e.type,type:"email",placeholder:"Correo Electrónico"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Contraseña:","label-for":"password"}},[t("ValidationProvider",{attrs:{name:"Contraseña",rules:""},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"Contraseña"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-4",attrs:{"label-for":"civil_status",label:"Estado Civil:"}},[t("b-form-select",{attrs:{plain:"",options:["SOLTERO","CASADO","VIUDO","DIVORCIADO","UNION LIBRE"],id:"civil_status"},model:{value:e.form.civil_status,callback:function(t){e.$set(e.form,"civil_status",t)},expression:"form.civil_status"}})],1),t("b-form-group",{staticClass:"col-md-4",attrs:{"label-for":"civil_status",label:"Tipo de Paciente:"}},[t("b-form-select",{attrs:{plain:"",options:["Medico","Fisioterapeutico"],id:"type_patient"},model:{value:e.form.patient_type,callback:function(t){e.$set(e.form,"patient_type",t)},expression:"form.patient_type"}})],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Género:","label-class":"d-block"}},[t("b-form-radio",{attrs:{inline:"",value:"MASCULINO"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v(" MASCULINO ")]),t("b-form-radio",{attrs:{inline:"",value:"FEMENINO"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v(" FEMENINO ")])],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Fecha de Nacimiento:","label-for":"birthdate"}},[t("ValidationProvider",{attrs:{name:"Fecha de Nacimiento",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.birthdate,expression:"form.birthdate"}],staticClass:"form-control",class:r.length>0?" is-invalid":"",attrs:{type:"date"},domProps:{value:e.form.birthdate},on:{input:function(t){t.target.composing||e.$set(e.form,"birthdate",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Teléfono:","label-for":"phone"}},[t("ValidationProvider",{attrs:{name:"Teléfono",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Teléfono"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Dirección:","label-for":"address"}},[t("ValidationProvider",{attrs:{name:"Dirección",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Dirección"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ocupación:","label-for":"Ocupación"}},[t("ValidationProvider",{attrs:{name:"Ocupación",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Ocupación"},model:{value:e.form.occupation,callback:function(t){e.$set(e.form,"occupation",t)},expression:"form.occupation"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{"label-for":"province",label:"Provincia:"}},[t("b-form-select",{attrs:{plain:"",options:e.provinces,id:"province","value-field":"id","text-field":"name"},on:{change:e.getCantones},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{"label-for":"city",label:"Ciudad:"}},[t("b-form-select",{attrs:{plain:"",options:e.cantones,id:"city","value-field":"canton","text-field":"canton"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),t("div",{staticClass:"col-md-12 w-100"},[t("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[e._v(" "+e._s("add"===e.type?"Guardar":"Actualizar")+" ")])],1)],1)],1)]}}])})],1)},m=[],p=(a("7db0"),a("d3b7"),a("07ac"),a("9bfd")),f={props:{type:{type:String,required:!0,default:"add"},data:{type:Object,required:!1}},mounted:function(){this.getProvinces()},data:function(){return{provinces:[],cantones:[],selectedProvince:"",form:{}}},watch:{data:function(e,t){if(this.form=e,"edit"===this.type){var a=this.provinces.find((function(t){return t.name.toLowerCase()===e.province.toLowerCase()}));a&&(this.form.province=a.name,this.selectedProvince=a.id,this.getCantones()),this.form.city=e.city}else this.selectedProvince=""}},methods:{onSubmit:function(){"add"===this.type?this.saveData():this.updateData()},saveData:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].post("/patients/register",e.form);case 3:e.$bvModal.hide("modal-form"),e.$emit("getData"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateData:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:c["a"].put("/patients/".concat(e.data.id),e.form).then((function(){s["a"].fire({icon:"success",title:"Actualizado Correctamente"}),e.$bvModal.hide("modal-form"),e.$emit("getData")})).catch((function(){s["a"].fire({icon:"error",title:"Error"})}));case 1:case"end":return t.stop()}}),t)})))()},getProvinces:function(){for(var e in p)if(p.hasOwnProperty(e)&&p[e].provincia){var t=p[e].provincia;this.provinces.push({id:e,name:t})}},getCantones:function(){var e=p[this.selectedProvince];this.form.province=e.provincia,this.cantones=Object.values(e.cantones)}}},v=f,b=a("2877"),h=Object(b["a"])(v,u,m,!1,null,null,null),_=h.exports,y=a("3d20"),g=a.n(y),C={components:{ModalForm:_,DataTable:d["a"]},mounted:function(){l["a"].index(),this.getData()},methods:{getData:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].get("/patients");case 3:a=t.sent,r=a.data,e.patients=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showModal:function(e,t){this.type=e,this.data=t,this.$bvModal.show("modal-form")},destroy:function(e){var t=this;g.a.fire({icon:"warning",title:"Seguro de eliminar",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&c["a"].delete("/patients/".concat(e)).then((function(e){200===e.status&&(s["a"].fire({icon:"success",title:"Eliminado correctamente"}),t.getData())})).catch((function(e){s["a"].fire({icon:"error",title:e.message})}))}))},goToEdit:function(e){localStorage.setItem("userEdit",e),this.$router.push({name:"patient.detail"})},goToHistory:function(e){localStorage.setItem("userEdit",e),this.$router.push({name:"patient.medical.history",params:{id:e}})},goToPhysiotherapeutic:function(e){localStorage.setItem("userEdit",e),this.$router.push({name:"patient.physiotherapeutic.history",params:{id:e}})},goToEvolutionNotes:function(e){localStorage.setItem("userEdit",e),this.$router.push({name:"patient.evolution.notes",params:{id:e}})},handleSearchPatient:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].get("/patients/type/".concat(t.type_patient));case 3:a=e.sent,r=a.data,t.patients=r.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},data:function(){return{data:{},type:"add",patients:[],columns:[{name:"Nombre",field:"first_last_name",sort:""},{name:"Documento",field:"document_number",sort:""},{name:"Teléfono",field:"phone",sort:""},{name:"Correo Electrónico",field:"email",sort:""},{name:"Acciones",field:"actions",sort:""}],clearForm:{first_last_name:"",second_last_name:"",name:"",document_type:"",document_number:"",email:"",password:"",civil_status:"",birthdate:"",gender:"",province:"",city:"",phone:"",address:""},type_patient:""}}},k=C,w=Object(b["a"])(k,r,o,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0d6e75.51adcaa7.js.map