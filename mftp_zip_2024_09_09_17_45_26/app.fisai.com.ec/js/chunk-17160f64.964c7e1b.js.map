{"version":3,"sources":["webpack:///./src/views/fisai/patients/EvolutionNotes.vue?5c23","webpack:///./src/views/fisai/patients/EvolutionNotes.vue","webpack:///src/views/fisai/patients/EvolutionNotes.vue","webpack:///./src/views/fisai/patients/EvolutionNotes.vue?b752","webpack:///./src/views/fisai/patients/EvolutionNotes.vue?6471"],"names":["render","_vm","this","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","_v","proxy","on","$event","showModalAdd","data","history","columns","_ref","row","rowIndex","_s","user","first_last_name","second_last_name","name","directives","rawName","value","concat","expression","_l","evolution","date","time","s","o","a","p","prescriptions","prescription","farmacos","indications","created_at","role","lastId","id","modifiers","showModalEdit","_e","showModal","downloadPdf","institucion","ref","_ref2","handleSubmit","stopPropagation","preventDefault","onSubmitEvolutionNote","evolutions","handleDeleteEvolution","notes","model","callback","$$v","$set","handleAddEvolution","handleDeletePrescription","handleAddPrescription","doctors","medicalID","staticRenderFns","components","DataTable","type","field","sort","_defineProperty","filters","formatDate","_value$split","split","_value$split2","_slicedToArray","year","month","day","mounted","xray","index","getData","getDoctors","JSON","parse","localStorage","getItem","codes","listCodes","methods","e","newDate","_toConsumableArray","local_notes","filter","handleChangeCie","event","description","find","item","code","toUpperCase","undefined","diagnosis_description","diagnosis_code","formatNumber","num","parseInt","previewImages","_this","files","target","result","images","length","Array","from","forEach","file","lector","FileReader","onload","push","readAsDataURL","handleAddResult","console","log","results","handleDeleteResult","local_result","handleAddDiagnosis","newDiagnosis","_objectSpread","diagnosis","cie","diagnosses","handleDeleteDiagnosis","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$api$get","wrap","_context","prev","next","api","get","sent","map","text","t0","stop","_this3","_callee2","_yield$api$get2","_context2","$route","params","Toast","fire","icon","title","$bvModal","show","_ref3","destroy","_this4","Swal","showDenyButton","showCancelButton","confirmButtonText","cancelButtonText","then","isConfirmed","delete","res","status","catch","error","message","_this5","_callee3","url","_context3","post","put","hide","onSubmitExtraData","_this6","_callee4","formData","response","_context4","FormData","append","i","exam_results","diagnoses","_this7","_callee5","urlPDF","link","_context5","responseType","window","URL","createObjectURL","Blob","document","createElement","href","setAttribute","body","appendChild","click","removeChild","component"],"mappings":"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","file":"js/chunk-17160f64.964c7e1b.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EvolutionNotes.vue?vue&type=style&index=0&id=47b73b74&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('iq-card',{scopedSlots:_vm._u([{key:\"headerTitle\",fn:function(){return [_c('h4',{staticClass:\"card-title\"},[_vm._v(\"Notas de Evolución\")])]},proxy:true},{key:\"headerAction\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.showModalAdd(_vm.data)}}},[_vm._v(\" Agregar \")])]},proxy:true},{key:\"body\",fn:function(){return [(_vm.history)?_c('DataTable',{attrs:{\"data\":_vm.history,\"columns\":_vm.columns,\"fields-search\":[\n              'diagnoses',\n              'weight',\n              'height',\n              'systolic_pressure',\n              'diastolic_pressure',\n            ]},scopedSlots:_vm._u([{key:\"rows\",fn:function({ row, rowIndex }){return [_c('tr',[_c('th',{attrs:{\"scope\":\"row\"}},[_vm._v(_vm._s(rowIndex + 1))]),_c('td',[_vm._v(\" \"+_vm._s(row.user.first_last_name)+\" \"+_vm._s(row.user.second_last_name)+\", \"+_vm._s(row.user.name)+\" \")]),_c('td',[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle\",value:(`collapse-${rowIndex}`),expression:\"`collapse-${rowIndex}`\"}],attrs:{\"variant\":\"primary\"}},[_vm._v(\"Ver notas de Evolución\")]),_c('b-collapse',{staticClass:\"mt-2\",attrs:{\"id\":`collapse-${rowIndex}`}},[_c('b-card',_vm._l((row.evolution),function(evolution){return _c('ul',{staticClass:\"border px-2 m-0 py-2\"},[_c('li',[_c('strong',[_vm._v(\"Fecha:\")]),_vm._v(\" \"+_vm._s(evolution.date)+\" - \"),_c('strong',[_vm._v(\"Hora:\")]),_vm._v(\" \"+_vm._s(evolution.time)+\" \")]),_c('li',[_c('ul',{staticClass:\"p-0 m-0\"},[_c('li',[_c('strong',[_vm._v(\"S:\")]),_vm._v(\" \"+_vm._s(evolution.s))]),_c('li',[_c('strong',[_vm._v(\"O:\")]),_vm._v(\" \"+_vm._s(evolution.o))]),_c('li',[_c('strong',[_vm._v(\"A:\")]),_vm._v(\" \"+_vm._s(evolution.a))]),_c('li',[_c('strong',[_vm._v(\"P:\")]),_vm._v(\" \"+_vm._s(evolution.p))])])])])}),0)],1)],1),_c('td',[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle\",value:(`collapse-prescriptions-${rowIndex}`),expression:\"`collapse-prescriptions-${rowIndex}`\"}],attrs:{\"variant\":\"primary\"}},[_vm._v(\"Ver Prescripciones\")]),_c('b-collapse',{staticClass:\"mt-2\",attrs:{\"id\":`collapse-prescriptions-${rowIndex}`}},[_c('b-card',_vm._l((row.prescriptions),function(prescription){return _c('ul',{staticClass:\"border p-2 m-0\"},[_c('li',[_c('strong',[_vm._v(\"Farmacoterapia e indicaciones:\")]),_vm._v(\" \"+_vm._s(prescription.farmacos)+\", \")]),_c('li',[_c('strong',[_vm._v(\"Farmacos:\")]),_vm._v(\" \"+_vm._s(prescription.indications)+\" \")])])}),0)],1)],1),_c('td',[_vm._v(\" \"+_vm._s(row.created_at)+\" \")]),_c('td',[_c('b-button-group',[(_vm.role != 'Paciente' && _vm.lastId === row.id)?_c('b-button',{directives:[{name:\"user-can\",rawName:\"v-user-can\",value:('leer pacientes'),expression:\"'leer pacientes'\"},{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],attrs:{\"variant\":\"warning\",\"size\":\"sm\",\"title\":\"Editar\"},on:{\"click\":function($event){return _vm.showModalEdit(row)}}},[_c('i',{staticClass:\"ri-ball-pen-fill m-0\"})]):_vm._e(),_c('b-button',{directives:[{name:\"user-can\",rawName:\"v-user-can\",value:('leer pacientes'),expression:\"'leer pacientes'\"}],attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.showModal(row)}}},[_c('i',{staticClass:\"ri-eye-fill m-0\"})]),_c('b-button',{directives:[{name:\"user-can\",rawName:\"v-user-can\",value:('leer pacientes'),expression:\"'leer pacientes'\"}],attrs:{\"variant\":\"success\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.downloadPdf(row)}}},[_c('i',{staticClass:\"ri-file-fill m-0\"})])],1)],1)])]}}],null,false,1733625410)}):_vm._e()]},proxy:true}])})],1)],1),_c('b-modal',{attrs:{\"id\":\"modal-data\",\"title\":\"Historial Clínico\",\"hide-footer\":\"\"}},[_c('ul',[_c('li',[_c('b',[_vm._v(\"Institucion del Sistema:\")]),_vm._v(\" \"+_vm._s(_vm.data.institucion))])])]),_c('b-modal',{attrs:{\"id\":\"modal-edit\",\"title\":\"Notas de Evolución\",\"hide-footer\":\"\",\"size\":\"lg\",\"no-close-on-backdrop\":\"\"}},[_c('ValidationObserver',{ref:\"form\",scopedSlots:_vm._u([{key:\"default\",fn:function({ handleSubmit }){return [_c('b-form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return handleSubmit(_vm.onSubmitEvolutionNote)}}},[_c('b-row',[_c('div',{staticClass:\"col-md-12\"},[_c('p',[_vm._v(\"EVOLUCIÓN\")])]),_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Fecha:\")]),_c('th',[_vm._v(\"Hora:\")]),_c('th',[_vm._v(\"Notas de Evolución (SOAP):\")]),_c('th',[_vm._v(\"-\")])])]),_c('tbody',[_vm._l((_vm.evolutions),function(evolution){return _c('tr',{key:evolution.date},[_c('td',[_vm._v(\" \"+_vm._s(evolution.date)+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(evolution.time)+\" \")]),_c('td',[_c('ul',[_c('li',[_vm._v(\"S: \"+_vm._s(evolution.s))]),_c('li',[_vm._v(\"O: \"+_vm._s(evolution.o))]),_c('li',[_vm._v(\"A: \"+_vm._s(evolution.a))]),_c('li',[_vm._v(\"P: \"+_vm._s(evolution.p))])])]),_c('td',[_c('button',{staticClass:\"btn btn-warning\",on:{\"click\":() => _vm.handleDeleteEvolution(evolution.notes)}},[_vm._v(\" X \")])])])}),_c('tr',[_c('td',[_c('b-form-input',{attrs:{\"type\":\"date\"},model:{value:(_vm.evolution.date),callback:function ($$v) {_vm.$set(_vm.evolution, \"date\", $$v)},expression:\"evolution.date\"}})],1),_c('td',[_c('b-form-input',{attrs:{\"type\":\"time\"},model:{value:(_vm.evolution.time),callback:function ($$v) {_vm.$set(_vm.evolution, \"time\", $$v)},expression:\"evolution.time\"}})],1),_c('td',[_c('div',{staticClass:\"d-flex flex-column gap-3\"},[_c('label',{staticClass:\"d-flex align-items-center\"},[_vm._v(\" S: \"),_c('b-form-input',{staticClass:\"mb-2\",model:{value:(_vm.evolution.s),callback:function ($$v) {_vm.$set(_vm.evolution, \"s\", $$v)},expression:\"evolution.s\"}})],1),_c('label',{staticClass:\"d-flex align-items-center\"},[_vm._v(\" O: \"),_c('b-form-input',{staticClass:\"mb-2\",model:{value:(_vm.evolution.o),callback:function ($$v) {_vm.$set(_vm.evolution, \"o\", $$v)},expression:\"evolution.o\"}})],1),_c('label',{staticClass:\"d-flex align-items-center\"},[_vm._v(\" A: \"),_c('b-form-input',{staticClass:\"mb-2\",model:{value:(_vm.evolution.a),callback:function ($$v) {_vm.$set(_vm.evolution, \"a\", $$v)},expression:\"evolution.a\"}})],1),_c('label',{staticClass:\"d-flex align-items-center\"},[_vm._v(\" P: \"),_c('b-form-input',{staticClass:\"mb-2\",model:{value:(_vm.evolution.p),callback:function ($$v) {_vm.$set(_vm.evolution, \"p\", $$v)},expression:\"evolution.p\"}})],1)])]),_c('td',[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.handleAddEvolution}},[_vm._v(\" Agregar \")])])])],2)]),_c('div',{staticClass:\"col-md-12\"},[_c('p',[_vm._v(\"PRESCRIPCIONES\")])]),_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Farmacoterapia e indicaciones:\")]),_c('th',[_vm._v(\"Farmacos:\")]),_c('th',[_vm._v(\"-\")])])]),_c('tbody',[_vm._l((_vm.prescriptions),function(prescription){return _c('tr',{key:prescription.date},[_c('td',[_vm._v(\" \"+_vm._s(prescription.indications)+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(prescription.farmacos)+\" \")]),_c('td',[_c('button',{staticClass:\"btn btn-warning\",on:{\"click\":() => _vm.handleDeletePrescription(prescription.indications)}},[_vm._v(\" X \")])])])}),_c('tr',[_c('td',[_c('b-form-textarea',{model:{value:(_vm.prescription.indications),callback:function ($$v) {_vm.$set(_vm.prescription, \"indications\", $$v)},expression:\"prescription.indications\"}})],1),_c('td',[_c('b-form-textarea',{model:{value:(_vm.prescription.farmacos),callback:function ($$v) {_vm.$set(_vm.prescription, \"farmacos\", $$v)},expression:\"prescription.farmacos\"}})],1),_c('td',[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.handleAddPrescription}},[_vm._v(\" Agregar \")])])])],2)]),_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label-for\":\"Personal de Salud\",\"label\":\"Personal de Salud:\"}},[_c('b-form-select',{attrs:{\"plain\":\"\",\"options\":_vm.doctors,\"id\":\"salud\"},model:{value:(_vm.data.medicalID),callback:function ($$v) {_vm.$set(_vm.data, \"medicalID\", $$v)},expression:\"data.medicalID\"}})],1)],1),_c('b-button',{staticClass:\"mr-2\",attrs:{\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\" Guardar \")]),_c('b-button',{staticClass:\"iq-bg-danger\",attrs:{\"type\":\"reset\",\"variant\":\"none\"}},[_vm._v(\" Cancelar \")])],1)]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\nul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n</style>\n<template>\n  <b-container fluid>\n    <b-row>\n      <b-col md=\"12\">\n        <iq-card>\n          <template v-slot:headerTitle>\n            <h4 class=\"card-title\">Notas de Evolución</h4>\n          </template>\n          <template v-slot:headerAction>\n            <b-button variant=\"primary\" @click=\"showModalAdd(data)\">\n              Agregar\n            </b-button>\n          </template>\n          <template v-slot:body>\n            <DataTable\n              v-if=\"history\"\n              :data=\"history\"\n              :columns=\"columns\"\n              :fields-search=\"[\n                'diagnoses',\n                'weight',\n                'height',\n                'systolic_pressure',\n                'diastolic_pressure',\n              ]\"\n            >\n              <template #rows=\"{ row, rowIndex }\">\n                <tr>\n                  <th scope=\"row\">{{ rowIndex + 1 }}</th>\n                  <td>\n                    {{ row.user.first_last_name }}\n                    {{ row.user.second_last_name }},\n                    {{ row.user.name }}\n                  </td>\n                  <td>\n                    <b-button\n                      v-b-toggle=\"`collapse-${rowIndex}`\"\n                      variant=\"primary\"\n                      >Ver notas de Evolución</b-button\n                    >\n                    <b-collapse :id=\"`collapse-${rowIndex}`\" class=\"mt-2\">\n                      <b-card>\n                        <ul\n                          class=\"border px-2 m-0 py-2\"\n                          v-for=\"evolution in row.evolution\"\n                        >\n                          <li>\n                            <strong>Fecha:</strong> {{ evolution.date }} -\n                            <strong>Hora:</strong>\n                            {{ evolution.time }}\n                          </li>\n                          <li>\n                            <ul class=\"p-0 m-0\">\n                              <li><strong>S:</strong> {{ evolution.s }}</li>\n                              <li><strong>O:</strong> {{ evolution.o }}</li>\n                              <li><strong>A:</strong> {{ evolution.a }}</li>\n                              <li><strong>P:</strong> {{ evolution.p }}</li>\n                            </ul>\n                          </li>\n                        </ul>\n                      </b-card>\n                    </b-collapse>\n                  </td>\n                  <td>\n                    <b-button\n                      v-b-toggle=\"`collapse-prescriptions-${rowIndex}`\"\n                      variant=\"primary\"\n                      >Ver Prescripciones</b-button\n                    >\n                    <b-collapse\n                      :id=\"`collapse-prescriptions-${rowIndex}`\"\n                      class=\"mt-2\"\n                    >\n                      <b-card>\n                        <ul\n                          class=\"border p-2 m-0\"\n                          v-for=\"prescription in row.prescriptions\"\n                        >\n                          <li>\n                            <strong>Farmacoterapia e indicaciones:</strong>\n                            {{ prescription.farmacos }},\n                          </li>\n                          <li>\n                            <strong>Farmacos:</strong>\n                            {{ prescription.indications }}\n                          </li>\n                        </ul>\n                      </b-card>\n                    </b-collapse>\n                  </td>\n                  <td>\n                    {{ row.created_at }}\n                  </td>\n                  <td>\n                    <b-button-group>\n                      <b-button\n                        v-if=\"role != 'Paciente' && lastId === row.id\"\n                        v-user-can=\"'leer pacientes'\"\n                        variant=\"warning\"\n                        size=\"sm\"\n                        @click=\"showModalEdit(row)\"\n                        v-b-tooltip.hover\n                        title=\"Editar\"\n                      >\n                        <i class=\"ri-ball-pen-fill m-0\"></i>\n                      </b-button>\n                      <b-button\n                        v-user-can=\"'leer pacientes'\"\n                        variant=\"secondary\"\n                        size=\"sm\"\n                        @click=\"showModal(row)\"\n                      >\n                        <i class=\"ri-eye-fill m-0\"></i>\n                      </b-button>\n                      <b-button\n                        v-user-can=\"'leer pacientes'\"\n                        variant=\"success\"\n                        size=\"sm\"\n                        @click=\"downloadPdf(row)\"\n                      >\n                        <i class=\"ri-file-fill m-0\"></i>\n                      </b-button>\n                    </b-button-group>\n                  </td>\n                </tr>\n              </template>\n            </DataTable>\n          </template>\n        </iq-card>\n      </b-col>\n    </b-row>\n\n    <b-modal id=\"modal-data\" title=\"Historial Clínico\" hide-footer>\n      <ul>\n        <li><b>Institucion del Sistema:</b> {{ data.institucion }}</li>\n      </ul>\n    </b-modal>\n\n    <b-modal\n      id=\"modal-edit\"\n      title=\"Notas de Evolución\"\n      hide-footer\n      size=\"lg\"\n      no-close-on-backdrop\n    >\n      <ValidationObserver ref=\"form\" v-slot=\"{ handleSubmit }\">\n        <b-form @submit.stop.prevent=\"handleSubmit(onSubmitEvolutionNote)\">\n          <b-row>\n            <div class=\"col-md-12\">\n              <p>EVOLUCIÓN</p>\n            </div>\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>Fecha:</th>\n                  <th>Hora:</th>\n                  <th>Notas de Evolución (SOAP):</th>\n                  <th>-</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"evolution in evolutions\" :key=\"evolution.date\">\n                  <td>\n                    {{ evolution.date }}\n                  </td>\n                  <td>\n                    {{ evolution.time }}\n                  </td>\n                  <td>\n                    <ul>\n                      <li>S: {{ evolution.s }}</li>\n                      <li>O: {{ evolution.o }}</li>\n                      <li>A: {{ evolution.a }}</li>\n                      <li>P: {{ evolution.p }}</li>\n                    </ul>\n                  </td>\n                  <td>\n                    <button\n                      class=\"btn btn-warning\"\n                      @click=\"() => handleDeleteEvolution(evolution.notes)\"\n                    >\n                      X\n                    </button>\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <b-form-input\n                      type=\"date\"\n                      v-model=\"evolution.date\"\n                    ></b-form-input>\n                  </td>\n                  <td>\n                    <b-form-input\n                      type=\"time\"\n                      v-model=\"evolution.time\"\n                    ></b-form-input>\n                  </td>\n                  <td>\n                    <div class=\"d-flex flex-column gap-3\">\n                      <label class=\"d-flex align-items-center\">\n                        S:\n                        <b-form-input\n                          class=\"mb-2\"\n                          v-model=\"evolution.s\"\n                        ></b-form-input>\n                      </label>\n                      <label class=\"d-flex align-items-center\">\n                        O:\n                        <b-form-input\n                          class=\"mb-2\"\n                          v-model=\"evolution.o\"\n                        ></b-form-input>\n                      </label>\n                      <label class=\"d-flex align-items-center\">\n                        A:\n                        <b-form-input\n                          class=\"mb-2\"\n                          v-model=\"evolution.a\"\n                        ></b-form-input>\n                      </label>\n                      <label class=\"d-flex align-items-center\">\n                        P:\n                        <b-form-input\n                          class=\"mb-2\"\n                          v-model=\"evolution.p\"\n                        ></b-form-input>\n                      </label>\n                    </div>\n                  </td>\n                  <td>\n                    <button @click=\"handleAddEvolution\" class=\"btn btn-primary\">\n                      Agregar\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"col-md-12\">\n              <p>PRESCRIPCIONES</p>\n            </div>\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>Farmacoterapia e indicaciones:</th>\n                  <th>Farmacos:</th>\n                  <th>-</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr\n                  v-for=\"prescription in prescriptions\"\n                  :key=\"prescription.date\"\n                >\n                  <td>\n                    {{ prescription.indications }}\n                  </td>\n                  <td>\n                    {{ prescription.farmacos }}\n                  </td>\n                  <td>\n                    <button\n                      class=\"btn btn-warning\"\n                      @click=\"\n                        () => handleDeletePrescription(prescription.indications)\n                      \"\n                    >\n                      X\n                    </button>\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <b-form-textarea\n                      v-model=\"prescription.indications\"\n                    ></b-form-textarea>\n                  </td>\n                  <td>\n                    <b-form-textarea\n                      v-model=\"prescription.farmacos\"\n                    ></b-form-textarea>\n                  </td>\n                  <td>\n                    <button\n                      @click=\"handleAddPrescription\"\n                      class=\"btn btn-primary\"\n                    >\n                      Agregar\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <b-form-group\n              class=\"col-md-12\"\n              label-for=\"Personal de Salud\"\n              label=\"Personal de Salud:\"\n            >\n              <b-form-select\n                v-model=\"data.medicalID\"\n                plain\n                :options=\"doctors\"\n                id=\"salud\"\n              >\n              </b-form-select>\n            </b-form-group>\n          </b-row>\n          <b-button type=\"submit\" variant=\"primary\" class=\"mr-2\">\n            Guardar\n          </b-button>\n          <b-button type=\"reset\" variant=\"none\" class=\"iq-bg-danger\">\n            Cancelar\n          </b-button>\n        </b-form>\n      </ValidationObserver>\n    </b-modal>\n  </b-container>\n</template>\n\n<script>\nimport { Toast } from \"./../../../mixins/toast\";\nimport { xray } from \"../../../config/pluginInit\";\nimport api from \"./../../../services/api\";\nimport DataTable from \"./../../../components/DataTable.vue\";\nimport Swal from \"sweetalert2\";\nimport listCodes from \"../../../Utils/codes.json\";\n\nexport default {\n  components: {\n    DataTable,\n  },\n  data() {\n    return {\n      role: null,\n      data: {},\n      type: \"add\",\n      history: [],\n      columns: [\n        {\n          name: \"Paciente\",\n          field: \"name\",\n          sort: \"\",\n        },\n        {\n          name: \"Notas de Evolucion\",\n          field: \"notes\",\n          sort: \"\",\n        },\n        {\n          name: \"Prescripciones\",\n          field: \"prescriptions\",\n          sort: \"\",\n        },\n        {\n          name: \"Fecha\",\n          field: \"created_at\",\n          sort: \"\",\n        },\n        {\n          name: \"Acciones\",\n          field: \"actions\",\n          sort: \"\",\n        },\n      ],\n      lastId: null,\n      type: \"add\",\n      result: {},\n      results: [],\n      diagnosis: {},\n      diagnosses: [],\n      images: [],\n      doctors: [],\n      fecha: \"\",\n      diagnosis_description: \"\",\n      diagnosis_code: \"\",\n      codes: [],\n      evolution: {\n        date: \" \",\n        time: \" \",\n        notes: \" \",\n      },\n      evolutions: [],\n      prescription: {\n        indications: \" \",\n        farmacos: \" \",\n      },\n      prescriptions: [],\n    };\n  },\n  filters: {\n    formatDate: function (value) {\n      if (!value) return \"\";\n      const [year, month, day] = value.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n  },\n  mounted() {\n    //funcion que se ejcuta cuando el componente esta montado (visualizado en el navegador)\n    xray.index();\n    this.getData();\n    this.getDoctors();\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    this.role = user.role;\n    this.codes = listCodes;\n  },\n  methods: {\n    handleAddEvolution(e) {\n      e.preventDefault();\n      const newDate = this.evolution.date.split(\"-\");\n      this.evolution.date = `${newDate[2]}/${newDate[1]}/${newDate[0]}`;\n      this.evolutions = [...this.evolutions, this.evolution];\n      this.evolution = {};\n    },\n    handleAddPrescription(e) {\n      e.preventDefault();\n      this.prescriptions = [...this.prescriptions, this.prescription];\n      this.prescription = {};\n    },\n    handleDeleteEvolution(local_notes) {\n      this.evolutions = this.evolutions.filter(\n        (evolution) => evolution.notes != local_notes\n      );\n    },\n    handleDeletePrescription(local_notes) {\n      this.prescriptions = this.prescriptions.filter(\n        (prescription) => prescription.indications != local_notes\n      );\n    },\n    handleChangeCie(event) {\n      const description = this.codes.find((item) =>\n        item.code == event.toUpperCase() ? item : \"\"\n      );\n      if (description == undefined) return;\n      this.diagnosis_description = description.description;\n      this.diagnosis_code = description.code;\n    },\n    formatNumber(num) {\n      return parseInt(num);\n    },\n    previewImages(event) {\n      const files = event.target.files;\n      this.result.images = files;\n      if (files && files.length > 0) {\n        this.images = [];\n        Array.from(files).forEach((file) => {\n          const lector = new FileReader();\n          lector.onload = (e) => {\n            this.images.push(e.target.result);\n          };\n          lector.readAsDataURL(file);\n        });\n      }\n    },\n    handleAddResult(e) {\n      e.preventDefault();\n      console.log(this.result.date);\n      const newDate = this.result.date.split(\"-\");\n      this.result.date = `${newDate[2]}/${newDate[1]}/${newDate[0]}`;\n      this.results = [...this.results, this.result];\n      this.images = [];\n      this.result = {};\n    },\n    handleDeleteResult(local_result) {\n      this.results = this.results.filter(\n        (result) => result.result != local_result\n      );\n    },\n    handleAddDiagnosis(e) {\n      e.preventDefault();\n      const newDiagnosis = {\n        ...this.diagnosis,\n        cie: this.diagnosis_code,\n        description: this.diagnosis_description,\n      };\n      this.diagnosses = [...this.diagnosses, newDiagnosis];\n      this.diagnosis = {};\n    },\n    handleDeleteDiagnosis(cie) {\n      this.diagnosses = this.diagnosses.filter((result) => result.cie != cie);\n    },\n    async getDoctors() {\n      try {\n        const { data } = await api.get(\"/doctors\");\n        this.doctors = [\n          ...data.data.map((item) => {\n            return {\n              value: item.id,\n              text: item.name,\n            };\n          }),\n        ];\n        console.log(this.doctors);\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    async getData() {\n      try {\n        const { data } = await api.get(\n          `/evolution-notes?patient_id=${this.$route.params.id}`\n        );\n        this.history = data.data;\n        this.lastId = this.history ? this.history[0].id : null;\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"Error\",\n        });\n      }\n    },\n    showModal(data) {\n      this.data = data;\n      this.$bvModal.show(\"modal-data\");\n    },\n    showModalAdd(data) {\n      this.prescriptions = [];\n      this.evolutions = [];\n      this.data = {};\n      this.type = \"add\";\n      this.$bvModal.show(\"modal-edit\");\n      this.data = data;\n    },\n    showModalEdit(data) {\n      this.prescriptions = [...data.prescriptions] ?? [];\n      this.evolutions = [...data.evolution] ?? [];\n      this.type = \"edit\";\n      this.$bvModal.show(\"modal-edit\");\n    },\n    destroy(id) {\n      Swal.fire({\n        icon: \"warning\",\n        title: \"Seguro de eliminar\",\n        showDenyButton: false,\n        showCancelButton: true,\n        confirmButtonText: \"Si\",\n        cancelButtonText: \"Cancelar\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          api\n            .delete(`/medical-history/${id}`)\n            .then((res) => {\n              if (res.status === 200) {\n                Toast.fire({\n                  icon: \"success\",\n                  title: \"Eliminado correctamente\",\n                });\n                this.getData();\n              }\n            })\n            .catch((error) => {\n              Toast.fire({\n                icon: \"error\",\n                title: error.message,\n              });\n            });\n        }\n      });\n    },\n    async onSubmitEvolutionNote() {\n      const url = `/patients/${this.$route.params.id}/evolution`;\n      let response;\n\n      try {\n        this.data = {\n          ...this.data,\n          evolution: this.evolutions,\n          prescriptions: this.prescriptions,\n        };\n        console.log(this.data);\n        if (this.type === \"add\") {\n          response = await api.post(url, this.data);\n        } else {\n          response = await api.put(url, this.data);\n        }\n\n        await this.getData();\n        this.$bvModal.hide(\"modal-edit\");\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"Error\",\n        });\n      }\n    },\n    async onSubmitExtraData() {\n      const url = `/patients/${this.$route.params.id}/extra`;\n      const formData = new FormData();\n\n      this.results.forEach((item, index) => {\n        formData.append(`results[${index}][name]`, item.name);\n        formData.append(`results[${index}][date]`, item.date);\n        formData.append(`results[${index}][result]`, item.result);\n\n        for (let i = 0; i < item.images.length; i++) {\n          formData.append(`results[${index}][images][]`, item.images[i]);\n        }\n      });\n\n      let response;\n\n      try {\n        this.data = {\n          ...this.data,\n          exam_results: [],\n          diagnoses: this.diagnosses,\n        };\n        if (this.type === \"add\") {\n          response = await api.post(url, this.data);\n        } else {\n          response = await api.put(url, this.data);\n        }\n\n        if (response) {\n          await api.post(\n            `/patients/${this.$route.params.id}/history/images`,\n            formData\n          );\n        }\n        await this.getData();\n        this.$bvModal.hide(\"modal-edit\");\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"Error\",\n        });\n      }\n    },\n    async downloadPdf(row) {\n      const url = `/patients/${this.$route.params.id}/evolution-note/pdf`;\n      try {\n        const response = await api.post(url, { row }, { responseType: \"blob\" });\n        const urlPDF = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement(\"a\");\n        link.href = urlPDF;\n        link.setAttribute(\"download\", \"Evolution-notes.pdf\"); // Nombre del archivo para descarga\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        Toast.fire({\n          icon: \"success\",\n          title: \"PDF generado\",\n        });\n      } catch (e) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"Error\",\n        });\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EvolutionNotes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EvolutionNotes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EvolutionNotes.vue?vue&type=template&id=47b73b74&scoped=true&\"\nimport script from \"./EvolutionNotes.vue?vue&type=script&lang=js&\"\nexport * from \"./EvolutionNotes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EvolutionNotes.vue?vue&type=style&index=0&id=47b73b74&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47b73b74\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}